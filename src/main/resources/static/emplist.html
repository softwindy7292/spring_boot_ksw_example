<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>게시글</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/emp.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		
		function listCallback(result){
			let htmls = "";
	
			$("#list-table").html('');
	
			$("<tr>", {
				html :	"<td>" + "사원번호" + "</td>" +
						"<td>" + "사원이름" + "</td>" +
						"<td>" + "직업" + "</td>" +
						"<td>" + "매니저" + "</td>" +
						"<td>" + "입사일자" + "</td>" +
						"<td>" + "급여" + "</td>" +
						"<td>" + "보너스" + "</td>" +
						"<td>" + "부서번호" + "</td>" +
						"<td>" + "삭제" + "</td>"
			}).appendTo("#list-table")
	
			if(result.length < 1){
				htmls.push("등록된 사원이 없습니다.");
			}else{
					
				$(result).each(function(){
					htmls += '<tr>';
					htmls += '<td>' + this.empno + '</td>';
					htmls += '<td>' + this.ename + '</td>';
					htmls += '<td>' + this.job + '</td>'
					htmls += '<td>' + this.mgr + '</td>';
					htmls += '<td>' + this.hiredate + '</td>';
					htmls += '<td>' + this.sal + '</td>';
					htmls += '<td>' + this.comm + '</td>';
					htmls += '<td>' + this.deptno + '</td>';
					htmls += '<td>'+ '<input id=' + this.empno + " type='button' class='btn_delete' value='삭제'>" + '</td>';
					htmls += '</tr>';
				});
	
				htmls+='<tr>';
				htmls+='<td colspan="9"> <a href="/join_view.html">새로운 사원</a> </td>';                         
				htmls+='</tr>';
	
			}
				
			$('#list-table').append(htmls);
	
		}
		
		let emp = empService();
		
		emp.list(listCallback);
	
		$(document).on("click", "#list-table .btn_delete", function(){
			console.log(this.id + "번 사원 삭제");
			$(this).parent().parent().remove();
			emp.del(this.id);
		});
		
	});
</script>
</head>
<body>
	<h1>Restful Emp 게시판 리스트</h1>

	<table id="list-table" width="1000" cellpadding="0" cellspacing="0" border="1">
	</table>
</body>
</html>