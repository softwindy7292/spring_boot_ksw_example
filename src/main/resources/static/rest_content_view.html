<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>게시글</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/board.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		let searchParams = new URLSearchParams(window.location.search)
		   
		console.log(searchParams.has('bid'));   
		let bid = searchParams.get('bid')
		console.log(bid);
		
		function getBoard(board){
			console.log(board)
			
			$('#input_hidden').val(board.bid);
			
			$('#td_bid').append(board.bid);
			$('#td_hit').append(board.bhit);
			$('#input_bname').val(board.bname);
			$('#input_btitle').val(board.btitle);
			$('#textarea_bcontent').text(board.bcontent);
		}
		
		let board = boardService();
		
		board.get(bid, getBoard);
		
		$("#updateForm").submit(function(event){
			event.preventDefault();
			
			let updateboard = {
				bid : $('#input_hidden').val(),
				bname : $('#input_bname').val(),
				btitle : $('#input_btitle').val(),
				bcontent : $('#textarea_bcontent').val()
			}
			
			board.update(updateboard);
			
			$(location).attr('href', 'boards/rest');
		})
	});
</script>
</head>
<body>
	<h1>게시글</h1>
	<table id="list-table" width="500" cellpadding="0" cellspacing="0" border="1">
		<form id="updateForm" action="modify" method="post">
			<input id="input_hidden" type="hidden" name="bid" value="">
			<tr>
				<td>번호</td>
				<td id="td_bid"></td>
			</tr>
			<tr>
				<td>히트</td>
				<td id="td_hit"></td>
			</tr>
			<tr>
				<td>이름</td>
				<td><input id="input_bname" type="text" name="bname" value=""></td>
			</tr>
			<tr>
				<td>제목</td>
				<td><input id="input_btitle" type="text" name="btitle" value=""></td>
			</tr>
			<tr>
				<td>내용</td>
				<td><textarea id="textarea_bcontent" rows="10" name="bcontent"></textarea></td>
			</tr>
			<tr>
				<td colspan="2">
					<input id="input_modify" type="submit" value="수정">
					&nbsp;&nbsp; <a href="list">목록보기</a>
					&nbsp;&nbsp; <a id="a-delete" href="${pageContext.request.contextPath}/rest/delete?bId=${content_view.bId}">삭제</a>
					&nbsp;&nbsp; <a href="reply_view?bId=${content_view.bId}">답변</a>
				</td>

			</tr>
		</form>
	</table>
</body>
</html>